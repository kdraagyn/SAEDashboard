<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>Setup and Use - SAE Dashboard</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">SAE Dashboard</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="active">
                    <a href="index.html">Setup and Use</a>
                </li>
            
            
            
                <li >
                    <a href="../code_design/index.html">Code design</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../code_design/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#libraries-used">Libraries Used</a></li>
        
    
        <li class="main "><a href="#install-on-windows">Install on Windows</a></li>
        
    
        <li class="main "><a href="#install-on-linux">Install on Linux</a></li>
        
    
        <li class="main "><a href="#project-file-structure">Project File Structure</a></li>
        
    
        <li class="main "><a href="#running-the-environment">Running the Environment</a></li>
        
            <li><a href="#environment-config">Environment Config</a></li>
        
            <li><a href="#run-the-gui-application">Run the GUI application</a></li>
        
            <li><a href="#run-the-ecu-can-simulator">Run the ECU can simulator</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h2 id="libraries-used">Libraries Used</h2>
<h2 id="install-on-windows">Install on Windows</h2>
<ol>
<li>
<p>Install Python3.4</p>
<p><blockquote><a href="https://www.python.org/downloads/release/python-340/">Download Python3.4</a></blockquote></p>
</li>
<li>
<p>Download and install the python-can library</p>
<p><blockquote><a href="https://bitbucket.org/hardbyte/python-can/downloads">Download python-can</a></blockquote></p>
</li>
<li>
<p>Download and install the pySerial library</p>
<p><blockquote><a href="https://pypi.python.org/pypi/pyserial/2.7">Download pySerial</a></blockquote></p>
</li>
<li>
<p>Create a "environmentConfig.py" file in the dashboard folder with these lines of code</p>
<pre><code>class environment:
    # set to "True" whenever you need to work with the GUI and random numbers should be generated
    # set to "False" whenever the can bus should be read
    guiDev = False

    # set interface to listen to for can messages
    #   vcan0:  used for dev on linux and for development
    #       can0:       used for actual hardware messages and the production configuration
    bus = "vcan0"

    # absolute location of frames declaration file
    framesFileDeclaration = "/path/to/canids.xml"

    DEV = "dev"  # on restart both will
    DASH = "dash"
    PUSH = "push"

    # environment type 
    envType = DEV
</code></pre>
<p>This file only tells the program to configure environment to automatically generate random values, set can input type and set the canids.xml location</p>
</li>
<li>
<p>Now start editing gauges.py and widgetComiler.py to create custom gauges</p>
</li>
</ol>
<h2 id="install-on-linux">Install on Linux</h2>
<p>This install process is completely within the Linux terminal. You can use the download links above in the Windows installation process to download/unzip the files and then use the Linux terminal.s</p>
<ol>
<li>
<p>Install python3.4    </p>
<pre><code>sudo apt-get install python3.4
</code></pre>
</li>
<li>
<p>Install pySerial
    In order to make sure it is installed into the python3.4 environment we need to download the source library and install it manually.</p>
<pre><code>wget https://pypi.python.org/packages/source/p/pyserial/pyserial-2.7.tar.gz
</code></pre>
<p>This will download the zipped pySerial python library source files. They need to be unzipped and run </p>
<pre><code>gunzip pyserial-2.7
cd pyserial-2.7
</code></pre>
<p>To finally install pySerial run the setup.py file with python3.4 within the pyserial-2.7 directory</p>
<pre><code>udo python3.4 setup.py install
</code></pre>
</li>
<li>
<p>Install python-can</p>
<p>Download zipped source files</p>
<pre><code>wget https://bitbucket.org/hardbyte/python-can/get/11c0cb8e8cb0.zip
</code></pre>
<p>Unzip into python-can Directory</p>
<pre><code>unzip 11c0cb8e8cb0.zip
</code></pre>
<p>Install from source into python3.4 environment</p>
<pre><code>cd hardbyte-python-can-11c0cb8e8cb0/
sudo python3.4 setup-py install
</code></pre>
<p>Create a .canrc file in the home directory. A ~/.canrc file looks like this:</p>
<pre><code>[default]
interface = socketcan_native
channel = vcan0
</code></pre>
</li>
<li>
<p>Install tkinter</p>
<pre><code>sudo apt-get install python3-tk
</code></pre>
</li>
<li>
<p>Create a "environmentConfig.py" file in the dashboard folder with these lines of code</p>
<pre><code>class environment:
    # set to "True" whenever you need to work with the GUI and random numbers should be generated
    # set to "False" whenever the can bus should be read
    guiDev = False

    # set interface to listen to for can messages
    #       vcan0:  used for dev on linux and for development
    #       can0:       used for actual hardware messages and the production configuration
    bus = "vcan0"

    # absolute location of frames declaration file
    framesFileDeclaration = "/path/to/canids.xml"

    DEV = "dev"  # on restart both will
    DASH = "dash"
    PUSH = "push"

    # environment type 
    envType = DEV
</code></pre>
</li>
</ol>
<h1 id="project-file-structure">Project File Structure</h1>
<pre><code>  main/
      canids.xml
      config.py
      dashExceptions.py
      dataStore.py
      enviromentConfig.py
      gauges.py
      mainRunner.py
      Wid
  tools/
        can0.sh
        pushCan.py
        vcan0.sh
  .gitignore    #Â git ignore file for use by git repository
  restart.py
  updateBeagleBone.py
</code></pre>
<h1 id="running-the-environment">Running the Environment</h1>
<h3 id="environment-config">Environment Config</h3>
<p>When a script is run, the environmentConfig class is used to aid in development control how the application acts </p>
<ul>
<li>
<p><strong>guiDev</strong>: Used to help with gui dev on windows environments get rid of the need for a can bus in gui design</p>
<ul>
<li>
<p>True: Random value generation</p>
</li>
<li>
<p>False: Listens to CAN bus for values</p>
</li>
</ul>
</li>
<li>
<p><strong>bus</strong>: system name of the can bus network to listen to</p>
</li>
<li>
<p><strong>framesFileDeclaration</strong>: conids.xml location</p>
</li>
<li>
<p><strong>envType</strong>: environment type controls what programs get restarted when restart.py is run. This is only run by the beaglebone whenever the beaglebone is updated and restarted</p>
<ul>
<li>
<p><strong>DEV</strong>: both GUI and pushCan are restarted </p>
</li>
<li>
<p><strong>GUI</strong>: only GUI main runner is restarted</p>
</li>
<li>
<p><strong>PUSH</strong>: only CAN pusher program is restarted</p>
</li>
</ul>
</li>
</ul>
<h3 id="run-the-gui-application">Run the GUI application</h3>
<p>In the main/ directory run the main runner python script:</p>
<pre><code>python3.4 mainRunner.py
</code></pre>
<h3 id="run-the-ecu-can-simulator">Run the ECU can simulator</h3>
<p>In the root directory run the pushCan python script as a module:</p>
<pre><code>python3.4 -m tools.pushCan
</code></pre>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>